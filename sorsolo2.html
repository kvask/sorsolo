<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oszt√°ly Sorsol√≥ üé≤</title>
    
    <style>
        body {
            background-color: #000033; /* S√∂t√©tk√©k h√°tt√©r */
            color: white;             /* Feh√©r sz√∂veg */
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1, h2 {
            border-bottom: 2px solid #5c5c8a;
            padding-bottom: 5px;
            color: #e6e6ff;
        }
        .container {
            background-color: #000055; /* Kicsit vil√°gosabb k√©k kont√©ner */
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        textarea, input[type="number"] {
            width: 95%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            /* A jobb olvashat√≥s√°g√©rt a beviteli mez≈ëk lehetnek vil√°gosak */
            background-color: #f0f8ff; 
            color: #333; 
            font-size: 16px;
        }
        button {
            background-color: #4CAF50; /* Z√∂ld gomb */
            color: white;
            padding: 12px 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        .result-box {
            background-color: #000033; /* Ugyanaz, mint a body h√°tt√©r */
            border: 1px dashed #5c5c8a;
            padding: 15px;
            margin-top: 15px;
            min-height: 50px;
            white-space: pre-wrap; /* Megtartja a sort√∂r√©seket */
            font-size: 1.1em;
        }
        .result-box h2 {
            margin-top: 0;
            color: #ffc107; /* Kiemelt s√°rga sz√≠n a nyertesnek */
        }
        
        /* Szerencseker√©k St√≠lusok */
        .wheel-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 20px auto;
        }
        #pointer {
            /* Egy piros h√°romsz√∂g mutat√≥ a ker√©k tetej√©n */
            position: absolute;
            top: -15px; 
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #FF0000; /* Piros */
            z-index: 10;
        }
        #wheelCanvas {
            /* A p√∂rg√©s anim√°ci√≥j√°t CSS transition v√©gzi */
            transition: transform 5s cubic-bezier(0.1, 0.7, 0.1, 1);
        }
    </style>
</head>
<body>

    <h1>Oszt√°ly Sorsol√≥ Eszk√∂zt√°r</h1>

    <div class="container">
        <h2>Di√°kok</h2>
        <p>√çrd be a di√°kok neveit, soronk√©nt egyet:</p>
        <textarea id="studentNames" rows="10" placeholder="Pl:
Nagy Anna
Kiss B√©la
Kov√°cs Cec√≠lia"></textarea>

        <h3>Funkci√≥k:</h3>
        
        <button onclick="shuffleStudents()">V√©letlen Sorrend</button>
        <button onclick="pickOneStudent()">Egy Di√°k Kiv√°laszt√°sa</button>
        
        <div>
            <label for="groupCount">Csoportok sz√°ma:</label>
            <input type="number" id="groupCount" value="2" min="2" style="width: 60px;">
            <button onclick="createGroups()">Csoportos√≠t√°s</button>
        </div>
        
        <div id="studentResult" class="result-box">
            Itt jelennek meg a di√°kokkal kapcsolatos eredm√©nyek.
        </div>
    </div>

    <div class="container">
        <h2>Szerencseker√©k üé°</h2>
        <p>√çrd be a v√°laszthat√≥ opci√≥kat, soronk√©nt egyet:</p>
        <textarea id="wheelOptions" rows="5" placeholder="Pl:
Felel√©s
Plusz pont
H√°zi feladat
Sz√ºnet"></textarea>

        <button onclick="spinWheel()">P√∂rget√©s!</button>

        <div class="wheel-container">
            <div id="pointer"></div>
            <canvas id="wheelCanvas" width="350" height="350"></canvas>
        </div>
        
        <div id="wheelResult" class="result-box">
            Itt jelenik meg a p√∂rget√©s eredm√©nye.
        </div>
    </div>


    <script>
        // === Seg√©df√ºggv√©nyek ===

        /**
         * Visszaadja a di√°kok list√°j√°t egy t√∂mbben, kisz≈±rve az √ºres sorokat.
         */
        function getStudents() {
            const names = document.getElementById('studentNames').value.trim();
            if (names === "") return [];
            // Sz√©tv√°lasztja soronk√©nt, √©s kisz≈±ri az √ºres sorokat
            return names.split('\n').filter(name => name.trim() !== "");
        }

        /**
         * Megjelen√≠ti az eredm√©nyt a megadott ID-j≈± elemben.
         */
        function displayResult(elementId, content) {
            document.getElementById(elementId).innerHTML = content;
        }

        /**
         * Egy t√∂mb elemeit keveri √∂ssze (Fisher-Yates algoritmus).
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // === Di√°k Funkci√≥k ===

        /**
         * 1. V√©letlenszer≈±en sorrendezi a di√°kokat.
         */
        function shuffleStudents() {
            let students = getStudents();
            if (students.length === 0) {
                displayResult('studentResult', 'K√©rlek, adj meg di√°kneveket!');
                return;
            }
            shuffleArray(students);
            displayResult('studentResult', '<h3>V√©letlen Sorrend:</h3>' + students.join('<br>'));
        }

        /**
         * 2. V√©letlenszer≈±en kiv√°laszt egy di√°kot.
         */
        function pickOneStudent() {
            let students = getStudents();
            if (students.length === 0) {
                displayResult('studentResult', 'K√©rlek, adj meg di√°kneveket!');
                return;
            }
            const randomIndex = Math.floor(Math.random() * students.length);
            const picked = students[randomIndex];
            displayResult('studentResult', `<h3>Kiv√°lasztott Di√°k:</h3><h2>${picked}</h2>`);
        }

        /**
         * 3. Megadott sz√°m√∫ csoportot k√©sz√≠t.
         */
        function createGroups() {
            let students = getStudents();
            const groupCount = parseInt(document.getElementById('groupCount').value);

            if (students.length === 0) {
                displayResult('studentResult', 'K√©rlek, adj meg di√°kneveket!');
                return;
            }
            if (groupCount < 1 || groupCount > students.length) {
                displayResult('studentResult', '√ârv√©nytelen csoportsz√°m. A csoportok sz√°ma nem lehet t√∂bb, mint a di√°kok sz√°ma.');
                return;
            }

            shuffleArray(students); // Mindig keverj√ºk meg csoportos√≠t√°s el≈ëtt

            // L√©trehozzuk az √ºres csoport-t√∂mb√∂ket
            let groups = [];
            for (let i = 0; i < groupCount; i++) {
                groups.push([]);
            }

            // Sorban sz√©tosztjuk a di√°kokat a csoportok k√∂z√∂tt
            students.forEach((student, index) => {
                groups[index % groupCount].push(student);
            });

            // HTML kimenet gener√°l√°sa
            let html = '<h3>Csoportok:</h3>';
            groups.forEach((group, index) => {
                html += `<h4>${index + 1}. Csoport:</h4>`;
                html += group.join('<br>'); // A csoport tagjai
                html += '<br><br>';
            });
            displayResult('studentResult', html);
        }


        // === Szerencseker√©k Funkci√≥k ===

        let wheelOptions = [];
        // Sz√≠nek a cikkelyekhez (ha t√∂bb opci√≥ van, ism√©tl≈ëdnek)
        const colors = ["#FF5733", "#33FF57", "#3357FF", "#FF33A1", "#33FFF6", "#F6FF33", "#FF8C33", "#8C33FF"];
        let currentRotation = 0; // Nyilv√°ntartja az aktu√°lis elfordul√°st (fokban)
        let isSpinning = false; // Ne lehessen p√∂rgetni, am√≠g p√∂r√∂g

        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');

        /**
         * Beolvassa az opci√≥kat a textare√°b√≥l.
         */
        function getWheelOptions() {
            const opts = document.getElementById('wheelOptions').value.trim();
            if (opts === "") return [];
            return opts.split('\n').filter(opt => opt.trim() !== "");
        }

        /**
         * Megrajzolja a kereket a v√°szonra (Canvas).
         */
        function drawWheel() {
            wheelOptions = getWheelOptions();
            if (wheelOptions.length === 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height); // T√∂r√∂lj√ºk a v√°sznat
                return;
            }

            const numOptions = wheelOptions.length;
            const arcSize = (2 * Math.PI) / numOptions; // Cikkely m√©rete radi√°nban
            const radius = canvas.width / 2 - 10; // Kis marg√≥
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const startAngle = -Math.PI / 2; // Kezdj√ºk fel√ºlr≈ël (12 √≥ra)

            ctx.clearRect(0, 0, canvas.width, canvas.height); // T√∂rl√©s
            ctx.font = '16px Arial';

            for (let i = 0; i < numOptions; i++) {
                const angle = startAngle + i * arcSize;
                
                // 1. Cikkely rajzol√°sa
                ctx.beginPath();
                ctx.fillStyle = colors[i % colors.length];
                ctx.moveTo(centerX, centerY);
                // arc(x, y, sug√°r, kezd≈ë sz√∂g, z√°r√≥ sz√∂g)
                ctx.arc(centerX, centerY, radius, angle, angle + arcSize);
                ctx.closePath();
                ctx.fill();

                // 2. Sz√∂veg rajzol√°sa (ez a tr√ºkk√∂s r√©sz)
                ctx.save(); // Ments√ºk a v√°szon √°llapot√°t (elforgat√°s el≈ëtt)
                ctx.fillStyle = "white"; // Sz√∂veg sz√≠ne
                const textAngle = angle + arcSize / 2; // A cikkely k√∂zepe

                // Pozicion√°l√°s a cikkely k√∂zep√©re
                const textX = centerX + Math.cos(textAngle) * (radius / 1.5);
                const textY = centerY + Math.sin(textAngle) * (radius / 1.5);
                ctx.translate(textX, textY);
                
                // Forgassuk a sz√∂veget, hogy kifel√© n√©zzen
                ctx.rotate(textAngle + Math.PI / 2); 
                
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(wheelOptions[i], 0, 0);
                ctx.restore(); // Vissza√°ll√≠tjuk a v√°sznat
            }
        }

        /**
         * 4. Elind√≠tja a ker√©k p√∂rg√©s√©t.
         */
        function spinWheel() {
            if (isSpinning || wheelOptions.length === 0) return; // M√°r p√∂r√∂g, vagy √ºres
            
            isSpinning = true;
            displayResult('wheelResult', 'P√∂rg√©s... üåÄ');

            // V√©letlen p√∂rg√©s: minimum 5 teljes k√∂r + egy v√©letlen sz√∂g
            const degreesToSpin = (360 * 5) + Math.random() * 360;
            currentRotation += degreesToSpin; // N√∂velj√ºk az √∂ssz-elfordul√°st

            // A CSS transition fogja anim√°lni a p√∂rg√©st
            canvas.style.transform = `rotate(${currentRotation}deg)`;

            // V√°rjunk a CSS anim√°ci√≥ v√©g√©ig (5 m√°sodperc, a CSS-ben defini√°lva)
            setTimeout(() => {
                isSpinning = false;
                
                // === Nyertes kisz√°m√≠t√°sa ===
                const arcSizeDeg = 360 / wheelOptions.length;
                
                // Az 'currentRotation' az, amennyit elfordult.
                // A mutat√≥ 0 fokn√°l (fel√ºl) van.
                // A cikkelyeinket 0 fokt√≥l (fel√ºl) rajzoltuk.
                
                // H√°ny fokot fordult a 360-as k√∂r√∂n bel√ºl?
                const finalAngle = currentRotation % 360; 

                // A mutat√≥ (0 fok) melyik cikkelybe esik?
                // Ha 10 fokot fordult, a 350 fokos sz√∂g van fel√ºl (a 0-hoz k√©pest).
                const angleAtPointer = (360 - finalAngle) % 360; 
                
                // Megn√©zz√ºk, h√°nyadik cikkely ez
                const winnerIndex = Math.floor(angleAtPointer / arcSizeDeg);
                
                const winner = wheelOptions[winnerIndex];
                displayResult('wheelResult', `<h3>A nyertes:</h3><h2>${winner}</h2>`);

            }, 5000); // 5000ms = 5s (CSS transition time)
        }

        // === Ind√≠t√°s ===
        // Figyelj√ºk, ha v√°ltozik a ker√©k tartalma, √©s √∫jrarajzoljuk
        document.getElementById('wheelOptions').addEventListener('input', drawWheel);
        // Rajzoljuk meg a kereket bet√∂lt√©skor (ha m√°r van benne sz√∂veg)
        drawWheel();
        
    </script>

</body>
</html>